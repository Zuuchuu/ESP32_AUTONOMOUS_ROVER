@tailwind base;
@tailwind components;
@tailwind utilities;

/* Leaflet map container */
.leaflet-container {
  background: #1e293b;
}

/* Fix z-index for overlay sidebars above Leaflet */
.leaflet-pane,
.leaflet-map-pane,
.leaflet-tile-pane,
.leaflet-overlay-pane,
.leaflet-shadow-pane,
.leaflet-marker-pane,
.leaflet-tooltip-pane,
.leaflet-popup-pane {
  z-index: auto !important;
}

.leaflet-top,
.leaflet-bottom {
  z-index: 500 !important;
}

/* Override Leaflet container stacking context */
.leaflet-container {
  z-index: 0;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #334155;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #475569;
}

/* Scrollbar utility class */
.scrollbar-thin::-webkit-scrollbar {
  width: 4px;
}

/* Overlay sidebar styling (no blur for performance) */
.sidebar-overlay {
  background: rgba(15, 23, 42, 0.95);
  /* Removed backdrop-filter: blur for performance */
}

/* Performance-optimized card effect (no blur) */
.glass-card {
  @apply bg-gcs-card/95 border border-gcs-border rounded-xl;
  /* Removed backdrop-blur for performance - GPU compositing was causing lag */
}

/* Status indicator animations */
.status-connected {
  @apply bg-gcs-success;
  animation: pulse-connected 2s infinite;
}

@keyframes pulse-connected {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

/* Attitude indicator styles */
.attitude-horizon {
  @apply relative w-20 h-20 rounded-full overflow-hidden;
  border: 3px solid var(--color-gcs-border, #334155);
  transform: rotate(var(--roll, 0deg));
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
  transform-style: preserve-3d;
  backface-visibility: hidden;
}

.attitude-sky {
  @apply absolute inset-0;
  background: linear-gradient(to bottom, #3b82f6 0%, #60a5fa 100%);
  transform: translate3d(0, var(--pitch-offset, 0px), 0);
  transition: transform 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
  /* Extend background to ensure full coverage */
  height: 200%;
  top: -50%;
}

.attitude-ground {
  @apply absolute inset-0;
  background: linear-gradient(to bottom, #78350f 0%, #451a03 100%);
  transform: translate3d(0, var(--pitch-offset, 0px), 0);
  transition: transform 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
  /* Extend background to ensure full coverage */
  height: 200%;
  top: 50%;
}

.attitude-horizon-line {
  @apply absolute left-0 right-0 h-0.5 bg-white;
  top: 50%;
  transform: translate3d(0, var(--pitch-offset, 0px), 0);
  transition: transform 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  will-change: transform;
}

.attitude-ladder {
  @apply absolute inset-0;
  transform: translate3d(0, var(--pitch-offset, 0px), 0);
  transition: transform 120ms cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
}

.attitude-ladder-mark {
  @apply absolute left-1/2 -translate-x-1/2 flex items-center gap-0.5;
  top: calc(50% - var(--deg-offset, 0px));
}

.attitude-ladder-line {
  @apply w-3 h-px bg-white/70;
}

.attitude-ladder-text {
  @apply text-[7px] text-white/70 font-mono;
}

.attitude-aircraft {
  @apply absolute inset-0 flex items-center justify-center pointer-events-none;
  /* Counter-rotate to stay fixed while horizon rotates */
  transform: rotate(calc(-1 * var(--roll, 0deg)));
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.attitude-aircraft-dot {
  @apply w-2.5 h-2.5 rounded-full bg-yellow-400 border-2 border-white shadow-lg;
}

.attitude-aircraft-wings {
  @apply absolute w-12 h-0.5 bg-yellow-400;
  box-shadow: 0 0 4px rgba(250, 204, 21, 0.5);
}

/* Compass styles */
.compass-container {
  @apply relative w-20 h-20;
}

.compass-bezel {
  @apply absolute inset-0 rounded-full border-2 border-gcs-border;
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.compass-rose-rotating {
  @apply absolute inset-1 rounded-full;
  transform: rotate3d(0, 0, 1, var(--heading, 0deg));
  transition: transform 180ms cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
  transform-style: preserve-3d;
  backface-visibility: hidden;
}

.compass-tick {
  @apply absolute left-1/2 top-1/2;
  transform: translate(-50%, -50%) rotate(var(--tick-angle, 0deg)) translateY(-36px);
}

.compass-tick-major {
  @apply w-0.5 h-2 bg-slate-300;
}

.compass-tick-minor {
  @apply w-px h-1 bg-slate-500;
}

.compass-cardinal {
  @apply absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(var(--cardinal-angle, 0deg)) translateY(-28px) rotate(var(--counter-rotate, 0deg));
  transition: transform 180ms cubic-bezier(0.25, 0.1, 0.25, 1);
}

.compass-cardinal-text {
  @apply block text-[11px] font-bold;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.compass-center-pointer {
  @apply absolute inset-0 flex items-center justify-center pointer-events-none;
}

.compass-pointer-triangle {
  @apply w-0 h-0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-bottom: 10px solid #ef4444;
  transform: translateY(-4px);
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
}

.compass-pointer-dot {
  @apply absolute w-2 h-2 rounded-full bg-slate-800 border border-slate-600;
}

/* Virtual joystick styles */
.joystick-base {
  @apply bg-gcs-card border-2 border-gcs-border rounded-full;
  box-shadow: inset 0 4px 12px rgba(0, 0, 0, 0.4);
}

.joystick-knob {
  @apply bg-gradient-to-br from-gcs-primary to-gcs-secondary rounded-full shadow-lg;
  transition: transform 0.1s ease-out;
}

/* Control button styles */
.control-btn {
  @apply px-4 py-2 rounded-lg font-semibold transition-all duration-200;
  @apply bg-gcs-card border border-gcs-border;
  @apply hover:bg-gcs-primary/20 hover:border-gcs-primary;
  @apply active:scale-95;
}

.control-btn-primary {
  @apply bg-gcs-primary text-white border-gcs-primary;
  @apply hover:bg-gcs-primary/80;
}

.control-btn-danger {
  @apply bg-gcs-danger text-white border-gcs-danger;
  @apply hover:bg-gcs-danger/80;
}

/* Telemetry value display */
.telemetry-value {
  @apply font-mono text-lg text-gcs-primary;
}

.telemetry-label {
  @apply text-xs text-slate-400 uppercase tracking-wider;
}

/* Map waypoint markers */
.waypoint-marker {
  @apply flex items-center justify-center w-6 h-6 rounded-full;
  @apply bg-gcs-primary text-white text-xs font-bold;
  @apply border-2 border-white shadow-lg;
}

.waypoint-marker-active {
  @apply bg-gcs-warning animate-pulse;
}

/* Mode toggle styles */
.mode-toggle {
  @apply relative inline-flex h-10 w-48 rounded-lg bg-gcs-card p-1;
}

.mode-toggle-option {
  @apply flex-1 flex items-center justify-center rounded-md text-sm font-medium transition-all;
  @apply text-slate-400 hover:text-white;
}

.mode-toggle-option.active {
  @apply bg-gcs-primary text-white shadow-lg;
}